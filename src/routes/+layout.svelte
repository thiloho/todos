<script>
	import { page } from '$app/stores';
    import { signOut } from "@auth/sveltekit/client";
	import '../app.css';
</script>

<header class="bg-blue-900 text-white p-4">
	<div class="max-w-screen-2xl ms-auto me-auto flex items-center gap-4">
		<p>
			<strong>
				<a href="/">Todos</a>
			</strong>
		</p>
		<button class="p-2 rounded border border-white bg-blue-950 hover:scale-105">
			<svg
				xmlns="http://www.w3.org/2000/svg"
				viewBox="0 0 20 20"
				fill="currentColor"
				class="w-5 h-5"
			>
				<path
					fill-rule="evenodd"
					d="M7.455 2.004a.75.75 0 01.26.77 7 7 0 009.958 7.967.75.75 0 011.067.853A8.5 8.5 0 116.647 1.921a.75.75 0 01.808.083z"
					clip-rule="evenodd"
				/>
			</svg>
		</button>
		{#if $page.data.session?.user}
			<details class="ms-auto relative">
				<summary
					class="block cursor-pointer border-x-2 rounded-full border-transparent hover:border-white"
				>
					<img
						src={$page.data.session?.user.image}
						alt="User account avatar"
						width="32"
						height="32"
						class="rounded-full"
					/>
				</summary>
				<div class="absolute end-0 bg-white text-black top-10 border border-neutral-200 p-4 flex flex-col gap-4 rounded">
					<p>Logged in as <strong>{$page.data.session?.user.email}</strong></p>
                    <button on:click={signOut} class="ps-2 pe-2 py-1 bg-neutral-100 border rounded border-neutral-200 text-blue-900 hover:underline hover:text-blue-950">Log out</button>
				</div>
			</details>
		{:else}
			<a href="/log-in" class="ms-auto hover:underline">Log in</a>
		{/if}
	</div>
</header>
<main class="mt-12 mb-16 ps-4 pe-4">
	<div class="max-w-screen-2xl ms-auto me-auto flex flex-col gap-8">
		<slot />
	</div>
</main>
<footer class="p-4 border-t">
	<div class="max-w-screen-2xl ms-auto me-auto flex flex-col gap-4">
		<p>
			<small>Copyright Â© 2023 Thilo Hohlt.</small>
		</p>
	</div>
</footer>
